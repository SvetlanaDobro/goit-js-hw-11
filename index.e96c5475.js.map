{"mappings":"AAKO,SAASA,EAAQC,GACtB,OAAOC,MASF,SAAuBD,GAC1B,MASEE,EAAc,IAAIC,gBATL,CACXC,IAAK,qCACLC,EAAGL,EACHM,WAAY,QACZC,YAAa,aACbC,WAAY,OACZC,KAAMC,EACNC,SAAUC,IAE8BC,WAC5C,MAAO,4BAAeX,G,CApBXY,CAAcd,IACxBe,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAAcH,EAASI,QAEhD,OAAOJ,EAASK,MAAM,G,CCT9B,MAAMC,EAASC,SAASC,eAAe,eACjCC,EAAYF,SAASG,cAAc,YACnCC,EAAcJ,SAASG,cAAc,cACpC,IAAIhB,EAAc,EAClB,MAAME,EAAU,EACvB,IAAIgB,EAAqB,GACrBC,EAAY,EAEhB,SAASC,EAAc9B,GAGnB,OAFJ4B,EAAqB5B,EAEVD,EAAQC,GACVe,MAAKgB,IACF,GAAIA,EAAKC,MAAQD,EAAKC,KAAKC,OAAS,EAOhC,OANAJ,EAAYE,EAAKG,UACbH,EAAKG,WAAaxB,EAAcE,EAChCuB,IAEAC,IAEGL,EAAKC,KAGZ,MADAG,IACM,IAAIjB,MAAM,kB,IA4BhC,SAASmB,EAAoBC,GACL,IAAhB5B,IACAe,EAAUc,UAAY,IAE1BD,EAAUE,SAAQC,KA3BtB,UAAwBC,aAACA,EAAYC,KAACA,EAAIC,MAACA,EAAKC,MAACA,EAAKC,SAACA,EAAQC,UAACA,IAC5D,MAAMC,EAASzB,SAAS0B,cAAc,OAChCC,EAAW,gDACAR,WAAsBC,6GAGnBC,iFAGAC,oFAGGC,qFAGCC,sDAIxBC,EAAOT,UAAYW,EACnBzB,EAAU0B,OAAOH,E,CAQbI,CAAeX,EAAS,G,CAqChC,SAASN,IACLR,EAAY0B,MAAMC,QAAU,M,CAGhC,SAASlB,IACTT,EAAY0B,MAAMC,QAAU,O,CAkB5BhC,EAAOiC,iBAAiB,UAxDxB,SAAsBC,GAClBA,EAAMC,iBAEN,MACMzD,EADc0D,KAAK1D,YACO2D,MAAMC,OAElB,KAAhB5D,IAGJU,EAAc,EAEdoB,EAAc9B,GACTe,MAAKgB,IAEFM,EAAoBN,GAmCxBF,GAAanB,EAAcE,EAC3BuB,IAEAC,GArC0B,IAEzByB,OAAMC,IACTC,QAAQD,MAAMA,GACdrC,EAAUc,UAAY,iFAAiF,I,IAsC7GZ,EAAY4B,iBAAiB,SAlC7B,WACG7C,IAECoB,EAAcF,GACTb,MAAKuB,IACFD,EAAoBC,GAcxBT,GAAanB,EAAcE,IAC3BuB,IACAV,EAAUuC,mBAAmB,YAAa,qEAfnB,G","sources":["src/fetch-api.js","src/index.js"],"sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\n\nimport {currentPage, perPage} from './index'\n\n\nexport function getData(searchQuery) {\n  return fetch(getRequestUrl(searchQuery))\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.statusText || response.status)\n      }\n        return response.json();\n    })\n};\n\nexport function getRequestUrl(searchQuery) {\n    const params = {\n        key: '37132018-4dabe95031a531ae3f58f9204',\n        q: searchQuery,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page: currentPage,\n        per_page: perPage\n    }\nconst queryString = new URLSearchParams(params).toString();\n    return `${BASE_URL}?${queryString}`;  \n}","import { getData } from \"./fetch-api\";\n\nconst formEl = document.getElementById('search-form');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nexport let currentPage = 1;\nexport const perPage = 5;\nlet currentSearchQuery = '';\nlet totalHits = 0;\n\nfunction loadHeadLines(searchQuery) {\ncurrentSearchQuery = searchQuery;\n   \n    return getData(searchQuery)\n        .then(data => {\n            if (data.hits && data.hits.length > 0) {\n                totalHits = data.totalHits;\n                if (data.totalHits <= currentPage * perPage) {\n                    hideLoadMoreButton();\n                } else {\n                    showLoadMoreButton();\n                }\n                return data.hits;\n            } else {\n                hideLoadMoreButton();\n                throw new Error('No images found');\n            }\n        });\n}\n\nfunction renderHeadLine({webformatURL,tags,likes,views,comments,downloads}) {\n    const cardEl = document.createElement('div');\n    const template = `<div class=\"photo-card\">\n         <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" /> \n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes: ${likes}</b>\n          </p>\n          <p class=\"info-item\">\n            <b>Views: ${views}</b>\n          </p>\n          <p class=\"info-item\">\n            <b>Comments: ${comments}</b>\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads: ${downloads}</b>\n          </p>\n        </div>\n      </div>`;\n    cardEl.innerHTML = template;\n    galleryEl.append(cardEl);\n};\n\nfunction renderHeadLinesList(headlines) {\n    if (currentPage === 1) {\n        galleryEl.innerHTML = '';\n    }\n    headlines.forEach(headline => {\n        renderHeadLine(headline);\n    });\n}\n\nfunction onFormSubmit(event) {\n    event.preventDefault();\n    \n    const searchInput = this.searchQuery;  \n    const searchQuery = searchInput.value.trim();\n    \n    if (searchQuery === '') {\n    return; \n  }\n    currentPage = 1;\n\n    loadHeadLines(searchQuery)\n        .then(data => {\n            \n            renderHeadLinesList(data);\n            toggleLoadMoreButton();\n        })\n        .catch(error => {\n      console.error(error);\n      galleryEl.innerHTML = '<p>Sorry, there are no images matching your search query. Please try again.</p>';\n    });\n}\n\nfunction loadMore() {\n   currentPage++;\n\n    loadHeadLines(currentSearchQuery)\n        .then(headlines => {\n            renderHeadLinesList(headlines);\n            checkEndOfResults();\n        });\n}\n\nfunction hideLoadMoreButton() {\n    loadMoreBtn.style.display = 'none';\n}\n\nfunction showLoadMoreButton() {\nloadMoreBtn.style.display = 'block';\n}\n\nfunction checkEndOfResults() {\n    if (totalHits <= currentPage * perPage) {\n        hideLoadMoreButton();\n        galleryEl.insertAdjacentHTML('beforeend', '<p>We\\'re sorry, but you\\'ve reached the end of search results.</p>');\n    }\n}\n\nfunction toggleLoadMoreButton() {\n    if (totalHits <= currentPage * perPage) {\n        hideLoadMoreButton();\n    } else {\n        showLoadMoreButton();\n    }\n}\n\nformEl.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', loadMore);"],"names":["$f485d2238ad142dc$export$7a171f172be0782e","searchQuery","fetch","queryString","URLSearchParams","key","q","image_type","orientation","safesearch","page","$1f0dc3b9307be026$export$385972cd6b54c3e1","per_page","$1f0dc3b9307be026$export$6cfc372de9b933a","toString","$f485d2238ad142dc$export$14619c0eed01a470","then","response","ok","Error","statusText","status","json","$1f0dc3b9307be026$var$formEl","document","getElementById","$1f0dc3b9307be026$var$galleryEl","querySelector","$1f0dc3b9307be026$var$loadMoreBtn","$1f0dc3b9307be026$var$currentSearchQuery","$1f0dc3b9307be026$var$totalHits","$1f0dc3b9307be026$var$loadHeadLines","data","hits","length","totalHits","$1f0dc3b9307be026$var$hideLoadMoreButton","$1f0dc3b9307be026$var$showLoadMoreButton","$1f0dc3b9307be026$var$renderHeadLinesList","headlines","innerHTML","forEach","headline","webformatURL","tags","likes","views","comments","downloads","cardEl","createElement","template","append","$1f0dc3b9307be026$var$renderHeadLine","style","display","addEventListener","event","preventDefault","this","value","trim","catch","error","console","insertAdjacentHTML"],"version":3,"file":"index.e96c5475.js.map"}