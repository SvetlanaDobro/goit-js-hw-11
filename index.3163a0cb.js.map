{"mappings":"YAAA,IAEMA,EAASC,SAASC,eAAe,eACjCC,EAAYF,SAASG,cAAc,YACnCC,EAAcJ,SAASG,cAAc,cACvCE,EAAc,EACZC,EAAU,GACZC,EAAqB,GACrBC,EAAY,EAkBhB,SAASC,EAAcC,GAInB,OAFAH,EAAqBG,EAEdC,MAlBX,SAAuBD,GACnB,IASEE,EAAc,IAAIC,gBATL,CACXC,IAAK,qCACLC,EAAGL,EACHM,WAAY,QACZC,YAAa,aACbC,WAAY,OACZC,KAAMd,EACNe,SAdQ,KAgBgCC,WAC5C,MAAO,GAAeC,OAvBT,2BAuBM,KAAeA,OAAZV,E,CAOTW,CAAcb,IACtBc,MAAK,SAAAC,G,OAAYA,EAASC,M,IAC1BF,MAAK,SAAAG,GACF,GAAIA,EAAKC,MAAQD,EAAKC,KAAKC,OAAS,EAOhC,OANArB,EAAYmB,EAAKG,UACbH,EAAKG,WA7BT,GA6BsBzB,EACjB0B,IAEDC,IAEGL,EAAKC,KAGpB,MADKG,IACC,IAAIE,MAAM,kB,IA4BxB,SAASC,EAAoBC,GACL,IAAhB9B,IACAH,EAAUkC,UAAY,IAE1BD,EAAUE,SAAQ,SAAAC,GA3BtB,IAAwBC,EAACC,EAAaC,EAAKC,EAAMC,EAAMC,EAASC,EACtDC,EACAC,EAFeP,GAADD,EA4BDD,GA5BEE,aAAaC,EAAdF,EAAcE,KAAKC,EAAnBH,EAAmBG,MAAMC,EAAzBJ,EAAyBI,MAAMC,EAA/BL,EAA+BK,SAASC,EAAxCN,EAAwCM,UACtDC,EAAS9C,SAASgD,cAAc,OAChCD,EAAW,gDACsBzB,OAAtBkB,EAAa,WAGVlB,OAHmBmB,EAAK,6GAMxBnB,OAHAoB,EAAM,iFAMHpB,OAHHqB,EAAM,oFAMFrB,OAHDsB,EAAS,qFAGEtB,OAAVuB,EAAU,sDAIlCC,EAAOV,UAAYW,EACnB7C,EAAU+C,OAAOH,E,IA6CrB,SAASf,IACL3B,EAAY8C,MAAMC,QAAU,M,CAGhC,SAASnB,IACT5B,EAAY8C,MAAMC,QAAU,O,CAkB5BpD,EAAOqD,iBAAiB,UAxDxB,SAAsBC,GAClBA,EAAMC,iBAEN,IACM5C,EADc6C,KAAK7C,YACO8C,MAAMC,OAElB,KAAhB/C,IAGJL,EAAc,EAEdI,EAAcC,GACTc,MAAK,SAAAG,GAEFO,EAAoBP,GAmCxBnB,GA3HQ,GA2HKH,EACb0B,IAEAC,G,IAnCC0B,OAAM,SAAAC,GACTC,QAAQD,MAAMA,GACdzD,EAAUkC,UAAY,iF,QAsC5BhC,EAAYgD,iBAAiB,SAlC7B,WACI/C,IAEAI,EAAcF,GACTiB,MAAK,SAAAW,GACFD,EAAoBC,GAcxB3B,GAAaH,EAAcC,IAC3ByB,IACA7B,EAAU2D,mBAAmB,YAAa,qE","sources":["src/index.js"],"sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\n \nconst formEl = document.getElementById('search-form');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet currentPage = 1;\nconst perPage = 40;\nlet currentSearchQuery = '';\nlet totalHits = 0;\n\n\n\nfunction getRequestUrl(searchQuery) {\n    const params = {\n        key: '37132018-4dabe95031a531ae3f58f9204',\n        q: searchQuery,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page: currentPage,\n        per_page: perPage\n    }\nconst queryString = new URLSearchParams(params).toString();\n    return `${BASE_URL}?${queryString}`;  \n}\n\nfunction loadHeadLines(searchQuery) {\n    \n    currentSearchQuery = searchQuery;\n    \n    return fetch(getRequestUrl(searchQuery))\n        .then(responce => responce.json())\n        .then(data => {\n            if (data.hits && data.hits.length > 0) {\n                totalHits = data.totalHits;\n                if (data.totalHits <= currentPage * perPage) {\n                     hideLoadMoreButton();\n                } else {\n                    showLoadMoreButton();\n                }\n                return data.hits;\n            } else {\n             hideLoadMoreButton();   \n        throw new Error('No images found');\n      }\n        })\n}\n\nfunction renderHeadLine({webformatURL,tags,likes,views,comments,downloads}) {\n    const cardEl = document.createElement('div');\n    const template = `<div class=\"photo-card\">\n         <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" /> \n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes: ${likes}</b>\n          </p>\n          <p class=\"info-item\">\n            <b>Views: ${views}</b>\n          </p>\n          <p class=\"info-item\">\n            <b>Comments: ${comments}</b>\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads: ${downloads}</b>\n          </p>\n        </div>\n      </div>`;\n    cardEl.innerHTML = template;\n    galleryEl.append(cardEl);\n};\n\nfunction renderHeadLinesList(headlines) {\n    if (currentPage === 1) {\n        galleryEl.innerHTML = '';\n    }\n    headlines.forEach(headline => {\n        renderHeadLine(headline);\n    });\n}\n\nfunction onFormSubmit(event) {\n    event.preventDefault();\n    \n    const searchInput = this.searchQuery;  \n    const searchQuery = searchInput.value.trim();\n    \n    if (searchQuery === '') {\n    return; \n  }\n    currentPage = 1;\n\n    loadHeadLines(searchQuery)\n        .then(data => {\n            \n            renderHeadLinesList(data);\n            toggleLoadMoreButton();\n        })\n        .catch(error => {\n      console.error(error);\n      galleryEl.innerHTML = '<p>Sorry, there are no images matching your search query. Please try again.</p>';\n    });\n}\n\nfunction loadMore() {\n    currentPage++;\n\n    loadHeadLines(currentSearchQuery)\n        .then(headlines => {\n            renderHeadLinesList(headlines);\n            checkEndOfResults();\n        });\n}\n\nfunction hideLoadMoreButton() {\n    loadMoreBtn.style.display = 'none';\n}\n\nfunction showLoadMoreButton() {\nloadMoreBtn.style.display = 'block';\n}\n\nfunction checkEndOfResults() {\n    if (totalHits <= currentPage * perPage) {\n        hideLoadMoreButton();\n        galleryEl.insertAdjacentHTML('beforeend', '<p>We\\'re sorry, but you\\'ve reached the end of search results.</p>');\n    }\n}\n\nfunction toggleLoadMoreButton() {\n    if (totalHits <= currentPage * perPage) {\n        hideLoadMoreButton();\n    } else {\n        showLoadMoreButton();\n    }\n}\n\nformEl.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', loadMore);"],"names":["$b8f9b7833fa37166$var$formEl","document","getElementById","$b8f9b7833fa37166$var$galleryEl","querySelector","$b8f9b7833fa37166$var$loadMoreBtn","$b8f9b7833fa37166$var$currentPage","$b8f9b7833fa37166$var$perPage","$b8f9b7833fa37166$var$currentSearchQuery","$b8f9b7833fa37166$var$totalHits","$b8f9b7833fa37166$var$loadHeadLines","searchQuery","fetch","queryString","URLSearchParams","key","q","image_type","orientation","safesearch","page","per_page","toString","concat","$b8f9b7833fa37166$var$getRequestUrl","then","responce","json","data","hits","length","totalHits","$b8f9b7833fa37166$var$hideLoadMoreButton","$b8f9b7833fa37166$var$showLoadMoreButton","Error","$b8f9b7833fa37166$var$renderHeadLinesList","headlines","innerHTML","forEach","headline","param","webformatURL","tags","likes","views","comments","downloads","cardEl","template","createElement","append","style","display","addEventListener","event","preventDefault","this","value","trim","catch","error","console","insertAdjacentHTML"],"version":3,"file":"index.3163a0cb.js.map"}