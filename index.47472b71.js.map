{"mappings":"YAAA,IAAMA,EAAW,2BAKV,SAASC,EAAQC,GACtB,OAAOC,MASF,SAAuBD,GAC1B,IASEE,EAAc,IAAIC,gBATL,CACXC,IAAK,qCACLC,EAAGL,EACHM,WAAY,QACZC,YAAa,aACbC,WAAY,OACZC,KAAMC,EACNC,SAAUC,IAE8BC,WAC5C,MAAO,GAAeC,OAAZhB,EAAS,KAAegB,OAAZZ,E,CApBXa,CAAcf,IACxBgB,MAAK,SAAAC,GACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAAcH,EAASI,QAEhD,OAAOJ,EAASK,M,ICTxB,IAAMC,EAASC,SAASC,eAAe,eACjCC,EAAYF,SAASG,cAAc,YACnCC,EAAcJ,SAASG,cAAc,cAChCjB,EAAc,EACZE,EAAU,EACnBiB,EAAqB,GACrBC,EAAY,EAEhB,SAASC,EAAc/B,GAGnB,OAFJ6B,EAAqB7B,EAEVD,EAAQC,GACVgB,MAAK,SAAAgB,GACF,GAAIA,EAAKC,MAAQD,EAAKC,KAAKC,OAAS,EAOhC,OANAJ,EAAYE,EAAKG,UACbH,EAAKG,WAAazB,EAAcE,EAChCwB,IAEAC,IAEGL,EAAKC,KAGZ,MADAG,IACM,IAAIjB,MAAM,kB,IA4BhC,SAASmB,EAAoBC,GACL,IAAhB7B,IACAgB,EAAUc,UAAY,IAE1BD,EAAUE,SAAQ,SAAAC,GA3BtB,IAAwBC,EAACC,EAAaC,EAAKC,EAAMC,EAAMC,EAASC,EACtDC,EACAC,EAFeP,GAADD,EA4BDD,GA5BEE,aAAaC,EAAdF,EAAcE,KAAKC,EAAnBH,EAAmBG,MAAMC,EAAzBJ,EAAyBI,MAAMC,EAA/BL,EAA+BK,SAASC,EAAxCN,EAAwCM,UACtDC,EAAS1B,SAAS4B,cAAc,OAChCD,EAAW,gDACsBrC,OAAtB8B,EAAa,WAGV9B,OAHmB+B,EAAK,6GAMxB/B,OAHAgC,EAAM,iFAMHhC,OAHHiC,EAAM,oFAMFjC,OAHDkC,EAAS,qFAGElC,OAAVmC,EAAU,sDAIlCC,EAAOV,UAAYW,EACnBzB,EAAU2B,OAAOH,E,IA6CrB,SAASd,IACLR,EAAY0B,MAAMC,QAAU,M,CAGhC,SAASlB,IACTT,EAAY0B,MAAMC,QAAU,O,CAkB5BhC,EAAOiC,iBAAiB,UAxDxB,SAAsBC,GAClBA,EAAMC,iBAEN,IACM1D,EADc2D,KAAK3D,YACO4D,MAAMC,OAElB,KAAhB7D,IAGJU,EAAc,EAEdqB,EAAc/B,GACTgB,MAAK,SAAAgB,GAEFM,EAAoBN,GAmCxBF,GAAapB,EAAcE,EAC3BwB,IAEAC,G,IAnCCyB,OAAM,SAAAC,GACTC,QAAQD,MAAMA,GACdrC,EAAUc,UAAY,iF,QAsC5BZ,EAAY4B,iBAAiB,SAlC7B,WACG9C,IAECqB,EAAcF,GACTb,MAAK,SAAAuB,GACFD,EAAoBC,GAcxBT,GAAapB,EAAcE,IAC3BwB,IACAV,EAAUuC,mBAAmB,YAAa,qE","sources":["src/fetch-api.js","src/index.js"],"sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\n\nimport {currentPage, perPage} from './index'\n\n\nexport function getData(searchQuery) {\n  return fetch(getRequestUrl(searchQuery))\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.statusText || response.status)\n      }\n        return response.json();\n    })\n};\n\nexport function getRequestUrl(searchQuery) {\n    const params = {\n        key: '37132018-4dabe95031a531ae3f58f9204',\n        q: searchQuery,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page: currentPage,\n        per_page: perPage\n    }\nconst queryString = new URLSearchParams(params).toString();\n    return `${BASE_URL}?${queryString}`;  \n}","import { getData } from \"./fetch-api\";\n\nconst formEl = document.getElementById('search-form');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nexport let currentPage = 1;\nexport const perPage = 5;\nlet currentSearchQuery = '';\nlet totalHits = 0;\n\nfunction loadHeadLines(searchQuery) {\ncurrentSearchQuery = searchQuery;\n   \n    return getData(searchQuery)\n        .then(data => {\n            if (data.hits && data.hits.length > 0) {\n                totalHits = data.totalHits;\n                if (data.totalHits <= currentPage * perPage) {\n                    hideLoadMoreButton();\n                } else {\n                    showLoadMoreButton();\n                }\n                return data.hits;\n            } else {\n                hideLoadMoreButton();\n                throw new Error('No images found');\n            }\n        });\n}\n\nfunction renderHeadLine({webformatURL,tags,likes,views,comments,downloads}) {\n    const cardEl = document.createElement('div');\n    const template = `<div class=\"photo-card\">\n         <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" /> \n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes: ${likes}</b>\n          </p>\n          <p class=\"info-item\">\n            <b>Views: ${views}</b>\n          </p>\n          <p class=\"info-item\">\n            <b>Comments: ${comments}</b>\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads: ${downloads}</b>\n          </p>\n        </div>\n      </div>`;\n    cardEl.innerHTML = template;\n    galleryEl.append(cardEl);\n};\n\nfunction renderHeadLinesList(headlines) {\n    if (currentPage === 1) {\n        galleryEl.innerHTML = '';\n    }\n    headlines.forEach(headline => {\n        renderHeadLine(headline);\n    });\n}\n\nfunction onFormSubmit(event) {\n    event.preventDefault();\n    \n    const searchInput = this.searchQuery;  \n    const searchQuery = searchInput.value.trim();\n    \n    if (searchQuery === '') {\n    return; \n  }\n    currentPage = 1;\n\n    loadHeadLines(searchQuery)\n        .then(data => {\n            \n            renderHeadLinesList(data);\n            toggleLoadMoreButton();\n        })\n        .catch(error => {\n      console.error(error);\n      galleryEl.innerHTML = '<p>Sorry, there are no images matching your search query. Please try again.</p>';\n    });\n}\n\nfunction loadMore() {\n   currentPage++;\n\n    loadHeadLines(currentSearchQuery)\n        .then(headlines => {\n            renderHeadLinesList(headlines);\n            checkEndOfResults();\n        });\n}\n\nfunction hideLoadMoreButton() {\n    loadMoreBtn.style.display = 'none';\n}\n\nfunction showLoadMoreButton() {\nloadMoreBtn.style.display = 'block';\n}\n\nfunction checkEndOfResults() {\n    if (totalHits <= currentPage * perPage) {\n        hideLoadMoreButton();\n        galleryEl.insertAdjacentHTML('beforeend', '<p>We\\'re sorry, but you\\'ve reached the end of search results.</p>');\n    }\n}\n\nfunction toggleLoadMoreButton() {\n    if (totalHits <= currentPage * perPage) {\n        hideLoadMoreButton();\n    } else {\n        showLoadMoreButton();\n    }\n}\n\nformEl.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', loadMore);"],"names":["$11d9cdc0e4820d4b$var$BASE_URL","$11d9cdc0e4820d4b$export$7a171f172be0782e","searchQuery","fetch","queryString","URLSearchParams","key","q","image_type","orientation","safesearch","page","$b8f9b7833fa37166$export$385972cd6b54c3e1","per_page","$b8f9b7833fa37166$export$6cfc372de9b933a","toString","concat","$11d9cdc0e4820d4b$export$14619c0eed01a470","then","response","ok","Error","statusText","status","json","$b8f9b7833fa37166$var$formEl","document","getElementById","$b8f9b7833fa37166$var$galleryEl","querySelector","$b8f9b7833fa37166$var$loadMoreBtn","$b8f9b7833fa37166$var$currentSearchQuery","$b8f9b7833fa37166$var$totalHits","$b8f9b7833fa37166$var$loadHeadLines","data","hits","length","totalHits","$b8f9b7833fa37166$var$hideLoadMoreButton","$b8f9b7833fa37166$var$showLoadMoreButton","$b8f9b7833fa37166$var$renderHeadLinesList","headlines","innerHTML","forEach","headline","param","webformatURL","tags","likes","views","comments","downloads","cardEl","template","createElement","append","style","display","addEventListener","event","preventDefault","this","value","trim","catch","error","console","insertAdjacentHTML"],"version":3,"file":"index.47472b71.js.map"}