{"mappings":"AAAA,MAEMA,EAASC,SAASC,eAAe,eACjCC,EAAYF,SAASG,cAAc,YACnCC,EAAcJ,SAASG,cAAc,cAC3C,IAAIE,EAAc,EAElB,IAAIC,EAAqB,GACrBC,EAAY,EAkBhB,SAASC,EAAcC,GAInB,OAFAH,EAAqBG,EAEdC,MAlBX,SAAuBD,GAWnB,MAAO,4BADS,IAAIE,gBATL,CACXC,IAAK,qCACLC,EAAGJ,EACHK,WAAY,QACZC,YAAa,aACbC,WAAY,OACZC,KAAMZ,EACNa,SAdQ,KAgBgCC,Y,CAQ/BC,CAAcX,IACtBY,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACF,GAAIA,EAAKC,MAAQD,EAAKC,KAAKC,OAAS,EAOhC,OANAnB,EAAYiB,EAAKG,UACbH,EAAKG,WA7BT,GA6BsBtB,EACjBuB,IAEDC,IAEGL,EAAKC,KAGpB,MADKG,IACC,IAAIE,MAAM,kB,IA4BxB,SAASC,EAAoBC,GACL,IAAhB3B,IACAH,EAAU+B,UAAY,IAE1BD,EAAUE,SAAQC,KA3BtB,UAAwBC,aAACA,EAAYC,KAACA,EAAIC,MAACA,EAAKC,MAACA,EAAKC,SAACA,EAAQC,UAACA,IAC5D,MAAMC,EAAS1C,SAAS2C,cAAc,OAChCC,EAAW,gDACAR,WAAsBC,6GAGnBC,iFAGAC,oFAGGC,qFAGCC,sDAIxBC,EAAOT,UAAYW,EACnB1C,EAAU2C,OAAOH,E,CAQbI,CAAeX,EAAS,G,CAqChC,SAASP,IACLxB,EAAY2C,MAAMC,QAAU,M,CAGhC,SAASnB,IACTzB,EAAY2C,MAAMC,QAAU,O,CAkB5BjD,EAAOkD,iBAAiB,UAxDxB,SAAsBC,GAClBA,EAAMC,iBAEN,MACM1C,EADc2C,KAAK3C,YACO4C,MAAMC,OAElB,KAAhB7C,IAGJJ,EAAc,EAEdG,EAAcC,GACTY,MAAKG,IAEFO,EAAoBP,GAmCxBjB,GA3HQ,GA2HKF,EACbuB,IAEAC,GArC0B,IAEzB0B,OAAMC,IACTC,QAAQD,MAAMA,GACdtD,EAAU+B,UAAY,iFAAiF,I,IAsC7G7B,EAAY6C,iBAAiB,SAlC7B,WACI5C,IAEAG,EAAcF,GACTe,MAAKW,IACFD,EAAoBC,GAcxBzB,GApHQ,GAoHKF,IACbuB,IACA1B,EAAUwD,mBAAmB,YAAa,qEAfnB,G","sources":["src/index.js"],"sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\n \nconst formEl = document.getElementById('search-form');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet currentPage = 1;\nconst perPage = 40;\nlet currentSearchQuery = '';\nlet totalHits = 0;\n\n\n\nfunction getRequestUrl(searchQuery) {\n    const params = {\n        key: '37132018-4dabe95031a531ae3f58f9204',\n        q: searchQuery,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page: currentPage,\n        per_page: perPage\n    }\nconst queryString = new URLSearchParams(params).toString();\n    return `${BASE_URL}?${queryString}`;  \n}\n\nfunction loadHeadLines(searchQuery) {\n    \n    currentSearchQuery = searchQuery;\n    \n    return fetch(getRequestUrl(searchQuery))\n        .then(responce => responce.json())\n        .then(data => {\n            if (data.hits && data.hits.length > 0) {\n                totalHits = data.totalHits;\n                if (data.totalHits <= currentPage * perPage) {\n                     hideLoadMoreButton();\n                } else {\n                    showLoadMoreButton();\n                }\n                return data.hits;\n            } else {\n             hideLoadMoreButton();   \n        throw new Error('No images found');\n      }\n        })\n}\n\nfunction renderHeadLine({webformatURL,tags,likes,views,comments,downloads}) {\n    const cardEl = document.createElement('div');\n    const template = `<div class=\"photo-card\">\n         <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" /> \n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes: ${likes}</b>\n          </p>\n          <p class=\"info-item\">\n            <b>Views: ${views}</b>\n          </p>\n          <p class=\"info-item\">\n            <b>Comments: ${comments}</b>\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads: ${downloads}</b>\n          </p>\n        </div>\n      </div>`;\n    cardEl.innerHTML = template;\n    galleryEl.append(cardEl);\n};\n\nfunction renderHeadLinesList(headlines) {\n    if (currentPage === 1) {\n        galleryEl.innerHTML = '';\n    }\n    headlines.forEach(headline => {\n        renderHeadLine(headline);\n    });\n}\n\nfunction onFormSubmit(event) {\n    event.preventDefault();\n    \n    const searchInput = this.searchQuery;  \n    const searchQuery = searchInput.value.trim();\n    \n    if (searchQuery === '') {\n    return; \n  }\n    currentPage = 1;\n\n    loadHeadLines(searchQuery)\n        .then(data => {\n            \n            renderHeadLinesList(data);\n            toggleLoadMoreButton();\n        })\n        .catch(error => {\n      console.error(error);\n      galleryEl.innerHTML = '<p>Sorry, there are no images matching your search query. Please try again.</p>';\n    });\n}\n\nfunction loadMore() {\n    currentPage++;\n\n    loadHeadLines(currentSearchQuery)\n        .then(headlines => {\n            renderHeadLinesList(headlines);\n            checkEndOfResults();\n        });\n}\n\nfunction hideLoadMoreButton() {\n    loadMoreBtn.style.display = 'none';\n}\n\nfunction showLoadMoreButton() {\nloadMoreBtn.style.display = 'block';\n}\n\nfunction checkEndOfResults() {\n    if (totalHits <= currentPage * perPage) {\n        hideLoadMoreButton();\n        galleryEl.insertAdjacentHTML('beforeend', '<p>We\\'re sorry, but you\\'ve reached the end of search results.</p>');\n    }\n}\n\nfunction toggleLoadMoreButton() {\n    if (totalHits <= currentPage * perPage) {\n        hideLoadMoreButton();\n    } else {\n        showLoadMoreButton();\n    }\n}\n\nformEl.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', loadMore);"],"names":["$1f0dc3b9307be026$var$formEl","document","getElementById","$1f0dc3b9307be026$var$galleryEl","querySelector","$1f0dc3b9307be026$var$loadMoreBtn","$1f0dc3b9307be026$var$currentPage","$1f0dc3b9307be026$var$currentSearchQuery","$1f0dc3b9307be026$var$totalHits","$1f0dc3b9307be026$var$loadHeadLines","searchQuery","fetch","URLSearchParams","key","q","image_type","orientation","safesearch","page","per_page","toString","$1f0dc3b9307be026$var$getRequestUrl","then","responce","json","data","hits","length","totalHits","$1f0dc3b9307be026$var$hideLoadMoreButton","$1f0dc3b9307be026$var$showLoadMoreButton","Error","$1f0dc3b9307be026$var$renderHeadLinesList","headlines","innerHTML","forEach","headline","webformatURL","tags","likes","views","comments","downloads","cardEl","createElement","template","append","$1f0dc3b9307be026$var$renderHeadLine","style","display","addEventListener","event","preventDefault","this","value","trim","catch","error","console","insertAdjacentHTML"],"version":3,"file":"index.f90bec58.js.map"}